<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZENTRA.AI Forensic Console V2</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome (for icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- vis-network CDN (for the Smart Evidence Graph) -->
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    
    <style>
        /* Custom Pastel & Clean Palette */
        :root {
            --color-primary-light: #e0f7fa; /* Light Blue */
            --color-primary: #00bcd4; /* Cyan/Teal */
            --color-secondary-light: #f3e5f5; /* Light Lavender */
            --color-secondary: #9c27b0; /* Purple */
            --color-bg: #f5f7fa; /* Off-White Background */
            --color-red-flag: #ef4444; /* Red-500 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg);
            overflow: hidden; /* Prevent body scroll, everything fits in the viewport */
        }
        /* Card Shadow Style - Adjusted for modern feel */
        .card-shadow {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        /* Slim Scrollbars for internal elements (Chat, Multimedia) */
        .slim-scroll::-webkit-scrollbar {
            width: 4px;
        }
        .slim-scroll::-webkit-scrollbar-thumb {
            background-color: #cbd5e1; /* Gray-300 */
            border-radius: 10px;
        }
        /* Vis Network Container - Graph is now focused */
        #evidence-graph {
            min-height: 400px; /* Ensure minimum size */
            background: #ffffff;
            border-radius: 0.75rem;
            border: 1px solid #e2e8f0;
        }
        /* Custom Chat Bubbles */
        .chat-user {
            background-color: var(--color-primary-light);
            border-radius: 12px 12px 4px 12px;
            color: #1f2937;
        }
        .chat-ai {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px 12px 12px 4px;
            color: #1f2937;
        }
        
        /* Tag styling for richness */
        .tag-style {
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.65rem; /* text-xs */
            font-weight: 600;
        }
    </style>
</head>
<body class="flex flex-col h-screen">

    <!-- 1. THIN TOP NAVIGATION BAR (Cyber Tech Look) -->
    <header class="bg-gray-900 text-white shadow-lg z-10 flex items-center justify-between h-14 px-6 flex-shrink-0 border-b-2 border-cyan-500">
        <!-- Logo & Title - ZENTRA.AI -->
        <div class="flex items-center space-x-3">
            <i class="fas fa-microchip text-xl text-cyan-400"></i>
            <span class="text-2xl font-extrabold tracking-wider font-mono text-cyan-400">ZENTRA.AI</span>
        </div>

        <!-- Right Side: Status & Profile -->
        <div class="flex items-center space-x-6 text-sm">
            <!-- Alert Banner -->
            <div class="bg-red-900 text-red-400 px-4 py-1.5 rounded-full font-medium text-xs card-shadow border border-red-700">
                <i class="fas fa-exclamation-circle mr-1"></i> 6 new red flags detected across 3 cases
            </div>
            
            <button class="text-gray-400 hover:text-cyan-400 relative">
                <i class="fas fa-bell text-lg"></i>
                <span class="absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full border border-gray-900"></span>
            </button>
            
            <div class="flex items-center space-x-2">
                <span class="px-3 py-1 bg-green-900 text-green-400 rounded-full font-semibold text-xs border border-green-700 shadow-sm font-mono">
                    <i class="fas fa-shield-alt mr-1"></i> SECURE MODE: ON
                </span>
                <span class="h-8 w-8 rounded-full bg-cyan-600 flex items-center justify-center text-white font-bold text-sm shadow-md border border-white">OS</span>
            </div>
        </div>
    </header>

    <!-- MAIN FLEX CONTAINER: Sidebar, Center Content, Right Chat -->
    <div class="flex flex-grow overflow-hidden">
        
        <!-- 2. LEFT SIDEBAR (w-24, Icon and Text Labels) -->
        <aside class="w-24 bg-gray-800 border-r border-gray-700 p-2 flex flex-col flex-shrink-0 shadow-lg slim-scroll overflow-y-auto">
            <nav class="space-y-4 pt-4">
                
                <!-- Dashboard (Active) -->
                <div class="p-2 rounded-lg bg-cyan-600 text-white transition duration-150 cursor-pointer shadow-md flex flex-col items-center justify-center group" title="Dashboard">
                    <i class="fas fa-chart-line text-xl group-hover:scale-110 transition-transform"></i>
                    <span class="text-xs mt-1 font-semibold">Dashboard</span>
                </div>
                
                <!-- Evidence -->
                <div class="p-2 rounded-lg hover:bg-gray-700 text-gray-300 hover:text-cyan-500 transition duration-150 cursor-pointer flex flex-col items-center justify-center" title="Case Files">
                    <i class="fas fa-folder-open text-xl"></i>
                    <span class="text-xs mt-1">Evidence</span>
                </div>
                
                <!-- Smart Graph -->
                <div class="p-2 rounded-lg hover:bg-gray-700 text-gray-300 hover:text-cyan-500 transition duration-150 cursor-pointer flex flex-col items-center justify-center" title="Smart Graph">
                    <i class="fas fa-project-diagram text-xl"></i>
                    <span class="text-xs mt-1">Graph</span>
                </div>
                
                <!-- Reports -->
                <div class="p-2 rounded-lg hover:bg-gray-700 text-gray-300 hover:text-cyan-500 transition duration-150 cursor-pointer flex flex-col items-center justify-center" title="Reports">
                    <i class="fas fa-file-pdf text-xl"></i>
                    <span class="text-xs mt-1">Reports</span>
                </div>
                
                <!-- Collaboration -->
                <div class="p-2 rounded-lg hover:bg-gray-700 text-gray-300 hover:text-cyan-500 transition duration-150 cursor-pointer flex flex-col items-center justify-center" title="Collaboration">
                    <i class="fas fa-users text-xl"></i>
                    <span class="text-xs mt-1">Team</span>
                </div>
                
                <!-- Settings -->
                <div class="p-2 rounded-lg hover:bg-gray-700 text-gray-300 hover:text-cyan-500 transition duration-150 cursor-pointer flex flex-col items-center justify-center" title="Settings">
                    <i class="fas fa-cog text-xl"></i>
                    <span class="text-xs mt-1">Settings</span>
                </div>
            </nav>
        </aside>

        <!-- 3. CENTER MAIN CONTENT AREA (Full Width Focus) -->
        <section id="center-main" class="flex flex-col flex-grow p-4 space-y-4 overflow-hidden">
            
            <!-- Case Header & Action Panel (New) -->
            <div class="flex items-center justify-between flex-shrink-0">
                <!-- Left: Case Number & Name -->
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-extrabold text-gray-800 bg-white p-2 rounded-lg card-shadow font-mono border-l-4 border-red-600">
                        CASE NUMBER: <span class="text-red-600">24-03-A27</span>
                    </h1>
                    <h2 class="text-xl font-extrabold text-gray-600 bg-white p-2 rounded-lg card-shadow border-l-4 border-cyan-600">
                        CASE NAME: <span class="text-cyan-600">Project Chimera</span>
                    </h2>
                </div>
                
                <!-- Right: Ingest Button & Progress -->
                <div class="flex items-center space-x-4">
                    <button class="px-5 py-2 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition duration-150 shadow-lg text-lg flex items-center">
                        <i class="fas fa-upload mr-2"></i> INGEST UFDR
                    </button>
                    <div class="w-64">
                        <p class="text-xs font-semibold text-gray-600 mb-1 flex justify-between">
                            Data Processing Status
                            <span class="text-red-600">75% Loaded</span>
                        </p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-red-600 h-2.5 rounded-full" style="width: 75%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Cards Strip -->
            <div class="grid grid-cols-4 gap-4 flex-shrink-0">
                <!-- Card 1: UFDRs Ingested -->
                <div class="bg-white p-4 rounded-xl card-shadow border-l-4 border-cyan-500 flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-500">UFDRs Ingested</p>
                        <p class="text-2xl font-bold text-gray-800">24</p>
                    </div>
                    <i class="fas fa-database text-3xl text-cyan-200"></i>
                </div>
                <!-- Card 2: Red Flags -->
                <div class="bg-white p-4 rounded-xl card-shadow border-l-4 border-red-500 flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-500">Active Red Flags</p>
                        <p class="text-2xl font-bold text-red-500">6</p>
                    </div>
                    <i class="fas fa-exclamation-triangle text-3xl text-red-200"></i>
                </div>
                <!-- Card 3: Avg Time Saved -->
                <div class="bg-white p-4 rounded-xl card-shadow border-l-4 border-green-500 flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-500">Avg Time Saved</p>
                        <p class="text-2xl font-bold text-gray-800">67<span class="text-lg font-normal">%</span></p>
                    </div>
                    <i class="fas fa-hourglass-half text-3xl text-green-200"></i>
                </div>
                <!-- Card 4: Evidence Linked -->
                <div class="bg-white p-4 rounded-xl card-shadow border-l-4 border-purple-500 flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-500">Evidence Linked</p>
                        <p class="text-2xl font-bold text-gray-800">52</p>
                    </div>
                    <i class="fas fa-link text-3xl text-purple-200"></i>
                </div>
            </div>

            <!-- Main Content: Graph and Bottom Widgets -->
            <div class="flex flex-col space-y-4 flex-grow overflow-hidden">

                <!-- 3.1 SMART EVIDENCE GRAPH (Majority of Center) -->
                <div class="bg-white p-5 rounded-xl card-shadow flex flex-col flex-grow overflow-hidden border-2 border-cyan-300">
                    <h2 class="text-xl font-bold text-gray-800 mb-1 flex items-center">
                        <i class="fas fa-sitemap mr-2 text-cyan-600"></i> Smart Evidence Graph
                    </h2>
                    <p class="text-sm text-gray-500 mb-4">Interactive Node Map for Case #2025-03-A27</p>
                    <div id="evidence-graph" class="flex-grow rounded-xl border border-gray-200">
                        <!-- vis-network will render here -->
                    </div>
                </div>

                <!-- Bottom Row: Media Forensics & Linkage Box (Adjacent) -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 flex-shrink-0">
                    
                    <!-- 3.2 MEDIA FORENSICS (Left Column) -->
                    <div class="bg-white p-5 rounded-xl card-shadow flex flex-col flex-shrink-0 overflow-hidden">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-camera-retro mr-2 text-purple-600"></i> Media Forensics (5/85 Flagged)
                        </h2>
                        <div class="flex flex-wrap gap-3 slim-scroll overflow-y-auto max-h-48">
                            <!-- Thumbnails with Tags (Increased content and rich tags) -->
                            
                            <!-- Item 1: OCR + Face (Confirmed) -->
                            <div class="w-24 h-28 bg-gray-200 rounded-lg flex flex-col justify-between p-1.5 shadow-md relative group hover:shadow-xl transition-shadow cursor-pointer">
                                <span class="text-xs text-gray-600 text-center block pt-2">img_001.jpg</span>
                                <div class="absolute top-1 right-1 flex flex-col space-y-1">
                                    <i class="fas fa-font text-xs p-1 rounded-full bg-yellow-400 text-white" title="Text Extracted (OCR)"></i>
                                    <i class="fas fa-user-tag text-xs p-1 rounded-full bg-blue-500 text-white" title="Face Detected"></i>
                                </div>
                                <span class="text-xs text-green-500 block text-center pb-1 font-semibold">Confirmed</span>
                            </div>

                            <!-- Item 2: Weapon Detected (Red Flag) -->
                            <div class="w-24 h-28 bg-red-100 rounded-lg flex flex-col justify-between p-1.5 shadow-md relative group hover:shadow-xl transition-shadow cursor-pointer border-2 border-red-500">
                                <span class="text-xs text-gray-600 text-center block pt-2 font-bold">vid_01.mp4</span>
                                <div class="absolute top-1 right-1 flex flex-col space-y-1">
                                    <i class="fas fa-exclamation-triangle text-xs p-1 rounded-full bg-red-600 text-white" title="Weapon Detected"></i>
                                    <i class="fas fa-robot text-xs p-1 rounded-full bg-gray-600 text-white" title="AI Flagged"></i>
                                </div>
                                <span class="text-xs text-red-500 block text-center pb-1 font-semibold">Red Flag</span>
                            </div>

                            <!-- Item 3: OCR only (AI Detected) -->
                            <div class="w-24 h-28 bg-gray-200 rounded-lg flex flex-col justify-between p-1.5 shadow-md relative group hover:shadow-xl transition-shadow cursor-pointer">
                                <span class="text-xs text-gray-600 text-center block pt-2">doc_scan.pdf</span>
                                <div class="absolute top-1 right-1 flex flex-col space-y-1">
                                    <i class="fas fa-font text-xs p-1 rounded-full bg-yellow-400 text-white" title="Text Extracted (OCR)"></i>
                                </div>
                                <span class="text-xs text-yellow-700 block text-center pb-1 font-semibold">AI Detected</span>
                            </div>

                            <!-- Item 4: Pending -->
                            <div class="w-24 h-28 bg-gray-100 rounded-lg flex flex-col justify-between p-1.5 shadow-md relative group border-2 border-dashed border-gray-400">
                                <span class="text-xs text-gray-400 text-center block pt-2">vid_clip.mov</span>
                                <div class="absolute top-1 right-1 flex flex-col space-y-1">
                                    <i class="fas fa-clock text-xs p-1 rounded-full bg-gray-500 text-white opacity-70" title="Pending Analysis"></i>
                                </div>
                                <span class="text-xs text-gray-500 block text-center pb-1">Pending</span>
                            </div>

                            <!-- Item 5: Deleted File Recovery -->
                            <div class="w-24 h-28 bg-blue-100 rounded-lg flex flex-col justify-between p-1.5 shadow-md relative group hover:shadow-xl transition-shadow cursor-pointer border-2 border-blue-500">
                                <span class="text-xs text-gray-600 text-center block pt-2">del_chat.db</span>
                                <div class="absolute top-1 right-1 flex flex-col space-y-1">
                                    <i class="fas fa-history text-xs p-1 rounded-full bg-blue-600 text-white" title="Recovered Artifact"></i>
                                </div>
                                <span class="text-xs text-blue-700 block text-center pb-1 font-semibold">Recovered</span>
                            </div>
                        </div>
                    </div>

                    <!-- 3.3 CROSS-CASE LINKAGE (Right Column) -->
                    <div class="bg-white p-5 rounded-xl card-shadow flex flex-col flex-shrink-0 overflow-hidden border-2 border-purple-300">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-network-wired mr-2 text-purple-600"></i> Cross-Case Linkage
                        </h2>
                        <ul class="space-y-3 slim-scroll overflow-y-auto max-h-48">
                            <li class="bg-gray-50 p-3 rounded-lg border-l-4 border-red-500 flex justify-between items-center">
                                <div>
                                    <p class="font-semibold text-sm text-gray-800">Suspect A Linked</p>
                                    <p class="text-xs text-gray-500">Shared Telegram ID in **Case 23-01-B12**</p>
                                </div>
                                <span class="tag-style bg-red-100 text-red-700">HIGH</span>
                            </li>
                            <li class="bg-gray-50 p-3 rounded-lg border-l-4 border-cyan-500 flex justify-between items-center">
                                <div>
                                    <p class="font-semibold text-sm text-gray-800">Device Match</p>
                                    <p class="text-xs text-gray-500">MAC Address found in **Case 22-05-D08**</p>
                                </div>
                                <span class="tag-style bg-cyan-100 text-cyan-700">MEDIUM</span>
                            </li>
                            <li class="bg-gray-50 p-3 rounded-lg border-l-4 border-yellow-500 flex justify-between items-center">
                                <div>
                                    <p class="font-semibold text-sm text-gray-800">Financial Link</p>
                                    <p class="text-xs text-gray-500">Small transaction to target in **Case 24-01-C01**</p>
                                </div>
                                <span class="tag-style bg-yellow-100 text-yellow-700">LOW</span>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
            
        </section>
        
        <!-- 4. RIGHT SIDEBAR (w-72) -->
        <aside class="w-72 bg-white border-l border-gray-100 p-4 flex flex-col space-y-4 flex-shrink-0 shadow-2xl overflow-hidden">
            
            <!-- AI Header (Removed "Chat") -->
            <div class="border-b pb-2 flex-shrink-0 flex justify-between items-center">
                <h3 class="text-xl font-bold text-gray-800 flex-shrink-0 flex items-center">
                    <i class="fas fa-robot mr-2 text-cyan-600"></i> ZENTRA AI
                </h3>
                <!-- Buttons (Made clearer and slightly larger) -->
                <div class="flex space-x-2">
                    <button class="text-sm px-4 py-2 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition duration-150 shadow-md flex items-center" title="Generate Report">
                        <i class="fas fa-file-pdf mr-1"></i> Report
                    </button>
                    <button class="text-sm px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition duration-150 shadow-md flex items-center" title="Summarize Case">
                        <i class="fas fa-lightbulb mr-1"></i> Summary
                    </button>
                </div>
            </div>

            <!-- Chat Content Box -->
            <div id="ai-chat-box" class="flex-grow space-y-4 slim-scroll overflow-y-auto pr-2">
                
                <!-- AI Welcome Message -->
                <div class="flex justify-start">
                    <div class="chat-ai p-3 max-w-[90%] text-sm shadow-sm">
                        Hello Officer. I'm ready to analyze your 24 ingested UFDRs. How can I assist with your investigation?
                    </div>
                </div>

                <!-- Mock User Query 1 (Using Markdown) -->
                <div class="flex justify-end">
                    <div class="chat-user p-3 max-w-[90%] text-sm shadow-sm">
                        Find chats mentioning **Bitcoin** between Jan–Mar.
                    </div>
                </div>

                <!-- Mock AI Response 1 (Using Markdown) -->
                <div class="flex justify-start">
                    <div class="chat-ai p-3 max-w-[90%] text-sm shadow-sm">
                        <i class="fas fa-check-circle text-green-500 mr-1"></i> Found **3 messages** mentioning Bitcoin.
                        <div class="mt-2 text-xs bg-gray-50 p-2 rounded-lg border border-gray-200 space-y-1">
                            <p>Source: <span class="font-bold">WhatsApp</span></p>
                            <p>Timestamp: <span class="font-bold">2025-03-12 14:32</span></p>
                            <p>Risk: <span class="text-red-600 font-bold">🔴 High</span></p>
                        </div>
                    </div>
                </div>

                <!-- Mock User Query 2 (Using Markdown) -->
                <div class="flex justify-end">
                    <div class="chat-user p-3 max-w-[90%] text-sm shadow-sm">
                        Show linked contacts for +91 988XX1234.
                    </div>
                </div>
                
                <!-- Mock AI Response 2 (Using Markdown) -->
                <div class="flex justify-start">
                    <div class="chat-ai p-3 max-w-[90%] text-sm shadow-sm">
                        <i class="fas fa-link text-purple-500 mr-1"></i> Linked to **2 suspects** via Telegram and Email logs. Flagged as high-risk.
                        <div class="mt-2 text-xs bg-gray-50 p-2 rounded-lg border border-gray-200 space-y-1">
                            <p>Source: <span class="font-bold">UFDR_0325.whatsapp.json</span></p>
                            <p>Risk Score: <span class="text-red-600 font-bold">92%</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="flex space-x-2 flex-shrink-0 pt-2 border-t border-gray-100">
                <input type="text" placeholder="Ask ZENTRA a question..."
                       class="flex-grow py-2 px-3 text-sm rounded-lg border border-gray-300 focus:ring-cyan-500 focus:border-cyan-500 bg-gray-50">
                <button class="px-3 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition duration-150 shadow-md">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            
            <!-- AI Driven Case Summary (Updated) -->
            <div class="bg-gray-50 p-4 rounded-xl border border-purple-300 flex flex-col flex-shrink-0">
                <h4 class="text-sm font-bold text-gray-800 mb-2 flex items-center border-b pb-1 justify-between">
                    <div class="flex items-center">
                         <i class="fas fa-brain mr-2 text-purple-600"></i> AI Case Synopsis
                    </div>
                    <!-- Confirmed Tag Added Here (Step 4) -->
                    <span class="tag-style bg-green-100 text-green-700 border border-green-300 whitespace-nowrap">
                        <i class="fas fa-check-double mr-1"></i> Confirmed
                    </span>
                </h4>
                <p class="text-gray-700 text-xs mb-2">
                    ZENTRA has identified a strong pattern linking **Person A** (Suspect) to foreign financial activity and suspicious files.
                </p>
                <div class="flex space-x-2 overflow-x-auto pb-1">
                    <!-- Only 3 High-Risk Transactions remains (Step 4) -->
                    <span class="tag-style bg-red-100 text-red-700 border border-red-300 whitespace-nowrap">
                        <i class="fas fa-fire mr-1"></i> 3 High-Risk Transactions
                    </span>
                </div>
            </div>

        </aside>
    </div>

    <!-- 5. BOTTOM STATUS BAR -->
    <footer class="bg-gray-800 text-white h-10 flex items-center justify-between px-6 text-xs flex-shrink-0">
        <span class="space-x-4">
            <span class="text-green-400 font-bold font-mono"><i class="fas fa-plug mr-1"></i> OFFLINE MODE ENABLED</span>
            <span class="text-yellow-400 font-bold font-mono"><i class="fas fa-lock mr-1"></i> DATA SECURE (AES-256)</span>
        </span>
        <span class="text-cyan-400 font-bold font-mono">
            <i class="fas fa-microchip mr-1"></i> AI ENGINE ACTIVE: BERT + PYTORCH V3.1
        </span>
    </footer>
    
    <script>
        // --- VISUALIZATION SETUP (vis-network) ---
        
        // Define Custom Node and Edge Data (Increased complexity and color variance)
        const nodes = new vis.DataSet([
            // Primary Suspects (Red/Purple)
            { id: 1, label: 'Person A\n(Main Suspect)', group: 's_main', title: 'High-Risk Suspect, Foreign Links', color: { background: '#f5d0fe', border: '#a855f7' } },
            { id: 2, label: 'Person B\n(Co-Conspirator)', group: 's_co', title: 'Associate, Linked to Data Leak', color: { background: '#fee2e2', border: '#ef4444' } },
            
            // Financial Nodes (Yellow/Orange)
            { id: 3, label: 'Crypto Wallet\n(0x...)', group: 'finance', icon: { face: '\uf830', color: '#f59e0b' }, title: 'Flagged Crypto Address, Transaction 4' },
            { id: 4, label: 'Offshore Bank\n(Swiss)', group: 'finance', icon: { face: '\uf155', color: '#f59e0b' }, title: 'Account linked to Person A' },
            
            // Communication Artifacts (Cyan/Blue)
            { id: 5, label: 'Telegram Chat\n(Group 1)', group: 'comms', icon: { face: '\uf086', color: '#06b6d4' }, title: 'Encrypted Group Chat, Key Phrase Match' },
            { id: 6, label: 'Email Server\n(Log 14)', group: 'comms', icon: { face: '\uf0e0', color: '#06b6d4' }, title: 'Bulk Emails Sent to 3rd Party' },
            { id: 7, label: 'Phone_001\n(Dump)', group: 'device', icon: { face: '\uf3cd', color: '#10b981' }, title: 'Device: Data Dump from Person A' },
            
            // Documents/Evidence (Green/Teal)
            { id: 8, label: 'Blueprint\n(PDF)', group: 'doc', icon: { face: '\uf15c', color: '#16a34a' }, title: 'Sensitive Document found in Cloud' },
            { id: 9, label: 'Image_002\n(Red Flag)', group: 'media', icon: { face: '\uf03e', color: '#fb923c' }, title: 'Media: Geotagged Image (Conflict Area)' },
            { id: 10, label: 'Case 23-01-B12', group: 'case', icon: { face: '\uf19c', color: '#7e22ce' }, title: 'Historical Case Link: Shared Contacts' },
            
            // Additional Nodes to bulk it up
            { id: 11, label: 'Known\nVendor', group: 'other', icon: { face: '\uf07a', color: '#64748b' } },
            { id: 12, label: 'VPN IP\n(192.168..)', group: 'other', icon: { face: '\uf0ac', color: '#64748b' } },
            { id: 13, label: 'Device_B\n(Tablet)', group: 'device', icon: { face: '\uf3fa', color: '#10b981' } },
            { id: 14, label: 'File_C\n(Key Log)', group: 'doc', icon: { face: '\uf023', color: '#16a34a' } },
        ]);

        const edges = new vis.DataSet([
            { from: 1, to: 7, label: 'Owner', width: 3 },
            { from: 7, to: 5, label: 'Installed App' },
            { from: 1, to: 5, label: 'Participates', color: { color: '#ef4444' } },
            { from: 2, to: 5, label: 'Participates' },
            { from: 2, to: 6, label: 'Recipient' },
            { from: 1, to: 4, label: 'Controls', length: 300 },
            { from: 4, to: 3, label: 'Funded (🚨)', color: { color: '#f59e0b' } },
            { from: 7, to: 9, label: 'Stored (Geo)' },
            { from: 1, to: 10, label: 'Shared Contact', dashes: true },
            { from: 2, to: 10, label: 'Shared ID', dashes: true },
            { from: 1, to: 8, label: 'Accessed' },
            { from: 8, to: 11, label: 'Related To' },
            { from: 13, to: 1, label: 'Used By' },
            { from: 13, to: 14, label: 'Stored On' },
            { from: 12, to: 6, label: 'Origin IP' },
        ]);

        // Updated options for better look and feel with new groups
        const options = {
            nodes: {
                shape: 'icon',
                icon: { face: 'FontAwesome', size: 30 },
                font: { color: '#333333', size: 12, multi: 'html' },
                borderWidth: 2,
                shadow: true,
            },
            edges: {
                arrows: { to: { enabled: true, scaleFactor: 0.6 } },
                color: { color: '#64748b', highlight: '#06b6d4' },
                font: { align: 'top', color: '#546e7a', size: 10, multi: 'html', bold: true },
                smooth: { type: 'dynamic' }
            },
            groups: {
                s_main: { icon: { code: '\uf007', color: '#a855f7', size: 40 }, color: { background: '#f5d0fe', border: '#a855f7' } },
                s_co: { icon: { code: '\uf007', color: '#ef4444', size: 35 }, color: { background: '#fee2e2', border: '#ef4444' } },
                finance: { icon: { code: '\uf155', color: '#f59e0b' } },
                comms: { icon: { code: '\uf086', color: '#06b6d4' } },
                device: { icon: { code: '\uf3cd', color: '#10b981' } },
                doc: { icon: { code: '\uf15c', color: '#16a34a' } },
                media: { icon: { code: '\uf03e', color: '#fb923c' } },
                case: { icon: { code: '\uf19c', color: '#7e22ce', size: 35 } },
                other: { icon: { code: '\uf0c1', color: '#64748b' } }
            },
            physics: {
                enabled: true,
                stabilization: { iterations: 200 }
            },
            interaction: { hover: true, tooltipDelay: 200 }
        };

        // Initialize the network
        window.onload = function() {
            // FIX: Get the DOM element reference for the graph container
            const container = document.getElementById('evidence-graph');
            const data = { nodes: nodes, edges: edges };

            if (container) {
                new vis.Network(container, data, options);
            } else {
                console.error("Error: Could not find element with ID 'evidence-graph'.");
            }
        }
    </script>
</body>
</html>
